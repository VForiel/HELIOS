# Agent Modification Log: Copilot Instructions Creation & Enhancement

**Date**: 2025-11-25  
**Session**: 01  
**Topic**: copilot-instructions  
**Agent**: GitHub Copilot (Claude Sonnet 4.5)

## Summary
Created comprehensive AI coding agent instructions file and enhanced it with critical code quality requirements from SPECIFICATIONS.md. Removed SPECIFICATIONS.md and created formal contributing guide explaining the "Full Agent" development strategy.

## Files Created
- `.github/copilot-instructions.md` - Main AI agent instruction file
- `agent-logs/2025.11.25-01_copilot-instructions.md` - This log file
- `docs/contribute.md` - Contributing guide explaining Full Agent strategy

## Files Modified
- `.github/copilot-instructions.md` (enhanced with code quality section)
- `docs/index.md` (added contribute section to toctree and quick start example)

## Files Deleted
- `SPECIFICATIONS.md` (content migrated to `.github/copilot-instructions.md`)

## Changes Made

### Initial Creation
Generated `.github/copilot-instructions.md` covering:
- Project architecture (Layer-based processing model)
- Core components (Scene, Optics, Photonics, Detectors)
- Critical conventions (astropy.Quantity units, Pupil geometry, embedded tests)
- Build & development workflows
- Common patterns for adding components
- Key file references

### Enhancement - Code Quality Requirements
Added comprehensive section on code quality based on SPECIFICATIONS.md:

1. **Mandatory Requirements Per Function**:
   - English numpy-style docstrings for Sphinx autodoc
   - Clear English comments
   - Unit tests validating correctness AND physical coherence
   - Sphinx documentation generation compatibility

2. **Testing Philosophy**:
   - Emphasized physical coherence validation (units, magnitudes, conservation laws)
   - Not just error-free execution, but scientifically correct results
   - Edge case coverage

3. **Documentation Maintenance**:
   - Auto-generated docs via Sphinx for all public APIs
   - Static markdown docs for architectural explanations
   - Synchronization requirements between code and docs

4. **Agent Modification Logs** (new requirement):
   - Mandatory log file for each modification session
   - Format: `agent-logs/YYYY.MM.DD-NN_<topic>.md`
   - Content: summary, files modified, tests added, breaking changes

5. **Updated "What NOT to Do"**:
   - Added prohibition on committing code without docstrings/tests
   - Added prohibition on skipping agent modification logs

### SPECIFICATIONS.md Migration
- Migrated all content from SPECIFICATIONS.md to `.github/copilot-instructions.md`
- Removed SPECIFICATIONS.md to avoid documentation duplication
- Single source of truth now in `.github/copilot-instructions.md`

### Contributing Guide Creation
Created `docs/contribute.md` explaining the **"Full Agent"** development strategy:

1. **Strategy Overview**:
   - AI agents as primary code contributors
   - Humans in read-only/supervisory role
   - Reduces AI comprehension errors from human-written code

2. **Contribution Workflows**:
   - Human contributors: review, validate, provide requirements
   - AI agents: implement following strict guidelines
   - Clear "do NOT" list for humans (no direct code edits)

3. **Code Quality Standards**:
   - Detailed examples of docstrings, tests, and physical validation
   - Modification log format specification
   - Testing philosophy emphasizing physical coherence

4. **Updated Documentation Index**:
   - Enhanced `docs/index.md` with quick start example
   - Added contribute.md to toctree
   - Better first impression for documentation visitors

## Rationale
These requirements ensure:
- **Scientific rigor**: Physical coherence testing catches calculation errors
- **Maintainability**: Clear documentation and comments for complex astronomical code
- **Transparency**: Agent logs provide audit trail of AI-driven changes
- **Quality**: Prevents accumulation of undocumented/untested code
- **Consistency**: Full Agent strategy reduces AI comprehension errors from mixed human/AI code
- **Onboarding**: Contributing guide clarifies roles and expectations for humans and AI agents

## Breaking Changes
None - this is a new documentation file establishing standards.

## Migration Notes
- SPECIFICATIONS.md removed; refer to `.github/copilot-instructions.md` instead
- All future contributions should follow the Full Agent workflow in `docs/contribute.md`

## Next Steps
All future agent modifications must:
1. Follow the code quality requirements
2. Create corresponding log files in `agent-logs/`
3. Update documentation when adding/modifying public APIs
