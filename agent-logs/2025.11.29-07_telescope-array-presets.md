# Agent Log: Telescope Array Preset Configurations (VLTI & LIFE)

**Date**: 2025-11-29  
**Session**: 07  
**Topic**: Telescope Array Presets

## Summary

Added class methods to `TelescopeArray` for creating preset interferometric configurations based on real-world and proposed telescope arrays. Inspired by the PHISE project implementation.

## Changes Made

### 1. New Class Methods in `TelescopeArray`

**File**: `src/helios/components/collector.py`

#### `TelescopeArray.vlti(uts=True)`
Creates a VLTI (Very Large Telescope Interferometer) configuration at ESO Paranal Observatory.

**Features**:
- **UTs mode** (`uts=True`): 4 Unit Telescopes of 8.2m diameter
  - Real baseline positions from GPS coordinates (via PHISE)
  - Baselines: ~16m to ~130m
  - Location: Paranal, Chile (-24.627°, -70.404°, 2635m altitude)
  
- **ATs mode** (`uts=False`): 4 Auxiliary Telescopes of 1.8m diameter
  - Compact representative configuration
  - Relocatable apertures (simplified preset)

**GPS → Baseline Conversion**:
- Source GPS coordinates from PHISE `get_UT_telescopes()`
- Tangent plane projection with Earth radius + elevation
- Reference: UT2 at (0, 0)

#### `TelescopeArray.life()`
Creates a LIFE (Large Interferometer For Exoplanets) space-based interferometer configuration.

**Features**:
- 4 collectors of 2m diameter
- **Centered array**: All collectors orbit around central point (0, 0)
- All collectors equidistant from center (~304m radius)
- Baselines: 100m to ~608m (rectangular configuration)
- **Space configuration**: North Pole (latitude=90°) for perfect Earth rotation tracking
- No atmospheric effects (space-based)
- Planar X-Y formation

**Rationale for North Pole Configuration**:
Since LIFE operates in space, placing it at the North Pole with vertical pointing ensures:
- Perfect rotation of the array as Earth rotates
- Simplified geometry (no parallax corrections)
- Continuous observation (no day/night cycle effects)

**Centered Array Design**:
The array is centered at (0,0) because the 4 spacecraft orbit around a common center of mass. This ensures:
- Symmetric rotation during observations
- Balanced orbital mechanics
- Simplified baseline calculations

### 2. Updated Demo Notebook

**File**: `examples/demo.ipynb`

- **Cell 14** (modified): VLTI configuration now uses `TelescopeArray.vlti(uts=True)` preset
- **Cells 15-16** (new): Added LIFE space interferometer section
  - Markdown introduction
  - Code demonstration with baseline analysis

### 3. Unit Tests

**File**: `tests/test_telescope_presets.py`

Created comprehensive tests for:
- `test_vlti_uts_configuration()`: Validates VLTI UT configuration
- `test_vlti_ats_configuration()`: Validates VLTI AT configuration  
- `test_life_configuration()`: Validates LIFE configuration
- `test_preset_collectors_have_pupils()`: Ensures all collectors have valid pupils
- `test_baseline_array_consistency()`: Verifies baseline array correctness

**All tests pass** ✅

## Usage Examples

```python
import helios

# Create VLTI with Unit Telescopes
vlti = helios.TelescopeArray.vlti(uts=True)
print(vlti.get_baseline_array())
vlti.plot_array(show_pupils=True)

# Create VLTI with Auxiliary Telescopes
vlti_at = helios.TelescopeArray.vlti(uts=False)

# Create LIFE space interferometer
life = helios.TelescopeArray.life()
print(f"Max baseline: {life.get_baseline_array().max():.1f}m")
life.plot_array(show_pupils=True)
```

## Physical Coherence Validation

### VLTI UTs
- ✅ Baseline positions match GPS-derived coordinates from PHISE
- ✅ Telescope diameters: 8.2m (VLT specification)
- ✅ Location: Paranal Observatory coordinates
- ✅ Baselines: 10-150m range (physically realistic)

### LIFE
- ✅ Baseline configuration from PHISE reference
- ✅ Telescope diameters: 2m (LIFE concept study)
- ✅ Maximum baseline: ~608m (within 100-700m mission concept)
- ✅ North Pole configuration ensures perfect rotation

## Reference

**PHISE Project**: https://github.com/VForiel/PHISE/blob/main/src/phise/classes/telescope.py
- `get_UT_telescopes()`: GPS coordinates for VLTI UTs
- `get_LIFE_telescopes()`: Baseline configuration for LIFE

## Files Modified

1. `src/helios/components/collector.py` - Added `vlti()` and `life()` class methods
2. `examples/demo.ipynb` - Updated VLTI cell + added LIFE section
3. `tests/test_telescope_presets.py` - New test file

## Breaking Changes

None - only additions to the API.

## Next Steps

Potential future enhancements:
- Add more VLTI configurations (AT baseline variations)
- Add other interferometers (CHARA, MROI, etc.)
- Support for time-dependent baseline rotation (Earth rotation synthesis)
